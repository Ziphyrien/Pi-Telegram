---
description: Audit changelog entries before release
---

Audit changelog entries for all commits since the last release.

## Process

1. **Find the last release tag:**

   ```bash
   git tag --sort=-version:refname | head -1
   ```

2. **List all commits since that tag:**

   ```bash
   git log <tag>..HEAD --oneline
   ```

3. **Read [Unreleased] section:**
   - CHANGELOG.md

4. **For each commit, check:**
   - Skip: changelog updates, doc-only changes, release housekeeping
   - Skip: changes to generated model catalogs unless accompanied by an intentional product-facing change in non-generated source/docs.
   - Determine which area(s) the commit affects (use `git show <hash> --stat`)
   - Verify a changelog entry exists in `CHANGELOG.md`
   - For external contributions (PRs), verify format: `Description ([#N](url) by [@user](url))`

6. **Add New Features section after changelog fixes:**
   - Insert a `### New Features` section at the start of `## [Unreleased]` in `CHANGELOG.md`.
   - Propose the top new features to the user for confirmation before writing them.
   - Link to relevant docs and sections whenever possible.

7. **Report:**
   - List commits with missing entries
   - List entries that need duplication across affected areas
   - Add any missing entries directly

## Changelog Format Reference

Sections (in order):

- `### Breaking Changes` - API changes requiring migration
- `### Added` - New features
- `### Changed` - Changes to existing functionality
- `### Fixed` - Bug fixes
- `### Removed` - Removed features

Attribution:

- Internal: `Fixed foo ([#123](https://github.com/Ziphyrien/Pi-Telegram/issues/123))`
- External: `Added bar ([#456](https://github.com/Ziphyrien/Pi-Telegram/pull/456) by [@user](https://github.com/user))`
